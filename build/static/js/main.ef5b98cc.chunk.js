(this["webpackJsonpgallery-app"]=this["webpackJsonpgallery-app"]||[]).push([[0],{40:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(2),c=n.n(r),s=n(24),i=n.n(s),o=(n(58),n(59),n(26)),u=n(12),l=n.n(u),d=n(42),j=n(19),p=n(23);n(68),n(69);p.a.initializeApp({apiKey:"AIzaSyD_jtU-TS8IpVaFSEks9x9OthZZ1itkI04",authDomain:"perso-gallery.firebaseapp.com",databaseURL:"https://perso-gallery.firebaseio.com",projectId:"perso-gallery",storageBucket:"perso-gallery.appspot.com",messagingSenderId:"445520863446",appId:"1:445520863446:web:27c341e29a73a5e442a977",measurementId:"G-Z1497W239F"});var b=p.a.firestore(),h=p.a.storage(),f=(p.a.firestore.FieldValue.serverTimestamp,p.a.auth()),x=new p.a.auth.GoogleAuthProvider,O=function(){f.signInWithPopup(x)},m=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,b.doc("users/".concat(t)).get();case 5:return n=e.sent,e.abrupt("return",Object(d.a)({id:t},n.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&null!==t){e.next=2;break}return e.abrupt("return");case 2:return n=b.collection("users").doc(t.uid),e.next=5,n.get();case 5:if(e.sent.exists){e.next=11;break}return console.log("inexisting"),a=t.email,r=t.displayName,e.next=11,n.set({email:a,displayName:r,images:[]});case 11:return e.abrupt("return",m(t.uid));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n(40);var v=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{className:"text-center font-bold",children:"Sign In"}),Object(a.jsxs)("div",{className:"border",children:[Object(a.jsx)("button",{className:"bg-danger hover:bg-danger w-75 py-2 text-white",onClick:function(){return O()},children:"Sign In"}),Object(a.jsxs)("p",{className:"text-center my-3",children:["Don't have an account?"," ",Object(a.jsx)(o.a,{to:"signUp",className:"text-blue-500 hover:text-blue-600",children:"Sign up here"})," "]})]})]})};var y=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{className:"text-center font-bold",children:"Sign Up"}),Object(a.jsxs)("div",{className:"border",children:[Object(a.jsx)("button",{className:"bg-danger hover:bg-danger w-75 py-2 text-white",onClick:function(){return O()},children:"Sign Up with Google"}),Object(a.jsxs)("p",{className:"text-center my-3",children:["Already have an account?"," ",Object(a.jsx)(o.a,{to:"/",className:"text-blue-500 hover:text-blue-600",children:"Sign in here"})," "]})]})]})},w=n(43),N=n(29),S=n(49),k=n(48),I=Object(r.createContext)({user:null}),C=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(w.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e.componentDidMount=Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.onAuthStateChanged(function(){var t=Object(j.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(n);case 2:a=t.sent,e.setState({user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),e}return Object(N.a)(n,[{key:"render",value:function(){var e=this.state.user;return Object(a.jsx)(I.Provider,{value:e,children:this.props.children})}}]),n}(r.Component),P=n(18),U=n(95),A=n(92),F=n(93),G=n(94),D=n(90),L=Object(D.a)((function(e){return{root:{flexGrow:1},btn:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var T=function(e){var t=L(),n=e.user.displayName;return Object(a.jsx)("div",{className:t.root,children:Object(a.jsx)(U.a,{position:"static",children:Object(a.jsxs)(A.a,{children:[Object(a.jsx)(F.a,{className:t.title,children:n}),Object(a.jsx)(G.a,{className:t.btn,variant:"contained",color:"secondary",onClick:function(){f.signOut()},children:"Log Out"})]})})})},B=function(){var e=Object(j.a)(l.a.mark((function e(t,n,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.collection(a).doc(n).set({url:t,user:a});case 2:alert("Uploaded");case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),E=function(e,t){var n=h.ref(),a={contentType:e.type};n.child("images/"+e.name).put(e,a).then((function(n){console.log("Uploaded:",n.totalBytes,"bytes."),n.ref.getDownloadURL().then((function(n){B(n,e.name,t.displayName)}))}))};n(72);var J=function(){var e=Object(r.useContext)(I),t=["image/png","image/jpeg"],n=Object(r.useState)(""),c=Object(P.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)(null),u=Object(P.a)(o,2),l=u[0],d=u[1];return Object(a.jsxs)("form",{children:[Object(a.jsxs)("div",{className:"output",children:[l&&Object(a.jsxs)("div",{children:[l.name,Object(a.jsx)("br",{})," wait Please"]}),s&&Object(a.jsx)("div",{className:"error",children:s})]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{className:"file_input",type:"file",onChange:function(n){return function(n){d("");var a=n.target.files[0];a&&t.includes(a.type)?(d(a),E(a,e),i(null)):(d(null),i("Please select a PNG/JPG image"))}(n)}}),Object(a.jsx)("span",{children:"+"})]})]})},R=function(e){var t=Object(r.useState)([]),n=Object(P.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){b.collection(e.displayName).onSnapshot((function(e){c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))})),a},Z=n(30);var z=function(e){var t=e.user,n=e.setSelectedImg,r=R(t);return Object(a.jsx)("div",{className:"img-grid",children:r&&r.map((function(e){return Object(a.jsx)(Z.a.div,{className:"img-wrap",layout:!0,whileHover:{opacity:1},onClick:function(){return n(e.data.url)},children:Object(a.jsx)(Z.a.img,{src:e.data.url,alt:e.id,initial:{opacity:0},animate:{opacity:1},transition:{delay:1}})},e.id)}))})};var M=function(e){var t=e.selectedImg,n=e.setSelectedImg;return Object(a.jsx)(Z.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&n(null)},initial:{opacity:0},animate:{opacity:1},children:Object(a.jsx)(Z.a.img,{src:t,alt:t,initial:{y:"-100vh"},animate:{y:0}})})};var V=function(){var e=Object(r.useContext)(I),t=Object(r.useState)(""),n=Object(P.a)(t,2),c=n[0],s=n[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)(T,{user:e}),Object(a.jsx)(J,{}),Object(a.jsx)(z,{user:e,setSelectedImg:s}),c&&Object(a.jsx)(M,{selectedImg:c,setSelectedImg:s})]})};var W=function(){var e=Object(r.useContext)(I);return Object(a.jsx)("div",{children:e?Object(a.jsx)(V,{}):Object(a.jsxs)(o.b,{children:[Object(a.jsx)(y,{path:"signUp"}),Object(a.jsx)(v,{path:"/"})]})})};var _=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(C,{children:Object(a.jsx)(W,{})})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,97)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(_,{})}),document.getElementById("root")),H()}},[[73,1,2]]]);
//# sourceMappingURL=main.ef5b98cc.chunk.js.map