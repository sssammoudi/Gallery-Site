{"version":3,"sources":["components/firebase_/index.js","components/authentification/SignIn.js","components/authentification/SignUp.js","providers/UserProvider.jsx","components/gallery/Nav.js","components/hooks/useFirestore.js","components/hooks/useStorage.js","components/gallery/Upload.js","components/hooks/RetrieveFirestore.js","components/gallery/ImgGrid.js","components/gallery/Modal.js","components/Home.js","components/Application.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","FirebaseStorage","storage","auth","FieldValue","serverTimestamp","provider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","UserDoc","id","a","doc","get","userDocument","data","console","error","CreateDoc","user","userDoc","collection","uid","exists","log","email","displayName","set","images","SignIn","className","onClick","to","SignUp","UserContext","createContext","UserProvider","state","componentDidMount","onAuthStateChanged","userAuth","setState","this","Provider","value","props","children","Component","useStyles","makeStyles","theme","root","flexGrow","btn","marginRight","spacing","title","Nav","classes","AppBar","position","Toolbar","Typography","Button","variant","color","signOut","UseFirestore","url","name","alert","UseStorage","file","FirebaseStorageRef","ref","metadata","type","child","put","then","snapshot","totalBytes","getDownloadURL","Upload","useContext","types","useState","err","setErr","setFile","onChange","e","file_","target","files","includes","handleChange","RetrieveFirestore","setimages","useEffect","onSnapshot","docs","map","ImgGrid","setSelectedImg","image","div","layout","whileHover","opacity","img","src","alt","initial","animate","transition","delay","Modal","selectedImg","classList","contains","y","Home","selectImg","setSelectImg","Application","path","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ef5b98cc.chunk.js","sourcesContent":["import firebase from \"firebase\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD_jtU-TS8IpVaFSEks9x9OthZZ1itkI04\",\n  authDomain: \"perso-gallery.firebaseapp.com\",\n  databaseURL: \"https://perso-gallery.firebaseio.com\",\n  projectId: \"perso-gallery\",\n  storageBucket: \"perso-gallery.appspot.com\",\n  messagingSenderId: \"445520863446\",\n  appId: \"1:445520863446:web:27c341e29a73a5e442a977\",\n  measurementId: \"G-Z1497W239F\",\n};\n\nfirebase.initializeApp(firebaseConfig);\nexport const firestore = firebase.firestore();\nexport const FirebaseStorage = firebase.storage();\nexport const timestamp = firebase.firestore.FieldValue.serverTimestamp;\n\nexport const auth = firebase.auth();\nconst provider = new firebase.auth.GoogleAuthProvider();\nexport const signInWithGoogle = () => {\n  auth.signInWithPopup(provider);\n};\n\nconst UserDoc = async (id) => {\n  if (!id) return null;\n  try {\n    const userDocument = await firestore.doc(`users/${id}`).get();\n\n    return {\n      id,\n      ...userDocument.data(),\n    };\n  } catch (error) {\n    console.error(\"Error fetching user\", error);\n  }\n};\n\nexport const CreateDoc = async (user) => {\n  if (!user || user === null) return;\n\n  const userDoc = firestore.collection(\"users\").doc(user.uid);\n  const snapshot = await userDoc.get();\n  if (!snapshot.exists) {\n    console.log(\"inexisting\");\n    const { email, displayName } = user;\n    await userDoc.set({\n      email,\n      displayName,\n      images: []\n    });\n  }\n\n  return UserDoc(user.uid);\n};\n","import React from \"react\";\nimport { Link } from \"@reach/router\";\nimport { signInWithGoogle } from \"../firebase_/index\";\nimport \"./style.css\";\n\nfunction SignIn() {\n  return (\n    <div>\n      <h1 className=\"text-center font-bold\">Sign In</h1>\n      <div className=\"border\">\n        <button\n          className=\"bg-danger hover:bg-danger w-75 py-2 text-white\"\n          onClick={() => signInWithGoogle()}\n        >\n          Sign In\n        </button>\n        <p className=\"text-center my-3\">\n          Don't have an account?{\" \"}\n          <Link to=\"signUp\" className=\"text-blue-500 hover:text-blue-600\">\n            Sign up here\n          </Link>{\" \"}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default SignIn;\n","import React from \"react\";\nimport { Link } from \"@reach/router\";\nimport { signInWithGoogle } from \"../firebase_/index\";\nimport \"./style.css\";\n\nfunction SignUp() {\n  return (\n    <div>\n      <h1 className=\"text-center font-bold\">Sign Up</h1>\n      <div className=\"border\">\n        <button\n          className=\"bg-danger hover:bg-danger w-75 py-2 text-white\"\n          onClick={() => signInWithGoogle()}\n        >\n          Sign Up with Google\n        </button>\n        <p className=\"text-center my-3\">\n          Already have an account?{\" \"}\n          <Link to=\"/\" className=\"text-blue-500 hover:text-blue-600\">\n            Sign in here\n          </Link>{\" \"}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default SignUp;\n","import React, { Component, createContext } from \"react\";\nimport { auth, CreateDoc } from \"../components/firebase_/index\";\n\nexport const UserContext = createContext({ user: null });\nclass UserProvider extends Component {\n  state = {};\n  componentDidMount = async () => {\n    auth.onAuthStateChanged(async (userAuth) => {\n      const user = await CreateDoc(userAuth);\n      this.setState({ user });\n    });\n  };\n\n  render() {\n    const { user } = this.state;\n    return (\n      <UserContext.Provider value={user}>\n        {this.props.children}\n      </UserContext.Provider>\n    );\n  }\n}\n\nexport default UserProvider;\n","import React from \"react\";\nimport { AppBar, Typography, Toolbar, Button } from \"@material-ui/core\";\nimport { auth } from \"../firebase_/index\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  btn: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\nfunction Nav(user) {\n  const classes = useStyles();\n  const { displayName } = user.user;\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography className={classes.title}>{displayName}</Typography>\n          <Button\n            className={classes.btn}\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={() => {\n              auth.signOut();\n            }}\n          >\n            Log Out\n          </Button>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}\n\nexport default Nav;\n","import { firestore } from \"../firebase_/index\";\n\nconst UseFirestore = async (url, name, user) => {\n  await firestore.collection(user).doc(name).set({\n    url: url,\n    user: user\n  })\n  alert(\"Uploaded\")\n};\n\nexport default UseFirestore;","import {FirebaseStorage} from \"../firebase_/index\"\nimport UseFirestore from \"./useFirestore\"\n\nconst UseStorage = (file, user) => {\n\tconst FirebaseStorageRef = FirebaseStorage.ref()\n\tlet metadata = {'contentType':file.type}\n\tFirebaseStorageRef.child('images/'+file.name).put(file, metadata).then(snapshot=>{\n\t\tconsole.log('Uploaded:', snapshot.totalBytes, 'bytes.');\n        //console.log('File metadata:', snapshot.metadata);\n        snapshot.ref.getDownloadURL().then((url)=>{\n          UseFirestore(url, file.name, user.displayName)\n        });\n\t})\n}\n\nexport default UseStorage;\n","import React, { useState, useContext } from \"react\";\nimport { UserContext } from \"../../providers/UserProvider\";\n//import UseFirestore from \"../hooks/useFirestore\"\nimport UseStorage from \"../hooks/useStorage\"\nimport \"./Gallery.css\";\n\nfunction Upload() {\n  const user = useContext(UserContext);\n  const types = [\"image/png\", \"image/jpeg\"];\n  const [err, setErr] = useState(\"\");\n  const [file, setFile] = useState(null);\n  const handleChange = (e) => {\n    setFile(\"\")\n    let file_ = e.target.files[0];\n    if (file_ && types.includes(file_.type)) {\n      setFile(file_);\n      UseStorage(file_, user)\n      setErr(null);\n    } else {\n      setFile(null);\n      setErr(\"Please select a PNG/JPG image\");\n    }\n  };\n  return (\n    <form>\n      <div className=\"output\">\n        {file && <div>{file.name}<br/> wait Please</div>}\n        {err && <div className=\"error\">{err}</div>}\n      </div>\n      <label>\n        <input\n          className=\"file_input\"\n          type=\"file\"\n          onChange={(e) => handleChange(e)}\n        />\n        <span>+</span>\n      </label>\n    </form>\n  );\n}\n\nexport default Upload;\n","import { firestore } from \"../firebase_/index\";\nimport { useState, useEffect } from 'react';\n\nconst RetrieveFirestore = (user) => {\n  const [images, setimages] = useState([]);\n  useEffect(() => {\n    firestore.collection(user.displayName)\n      .onSnapshot((snapshot) => {\n        setimages(\n          snapshot.docs.map((doc) => ({ id: doc.id, data: doc.data() }))\n        );\n      });\n  });\n  return images\n}\n\nexport default RetrieveFirestore\n","import React from \"react\";\nimport RetrieveFirestore from \"../hooks/RetrieveFirestore\";\nimport { motion } from 'framer-motion';\n\nfunction ImgGrid({user, setSelectedImg}) {\n  const images = RetrieveFirestore(user)\n  return (\n    <div className=\"img-grid\">\n      {images && images.map(image =>(\n        <motion.div className=\"img-wrap\" key={image.id} \n          layout\n          whileHover={{ opacity: 1 }}\n          onClick={() => setSelectedImg(image.data.url)}\n        >\n          <motion.img src={image.data.url} alt={image.id}\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 1 }}\n          />\n        </motion.div>\n      ))}\n    </div>\n  )\n}\n\nexport default ImgGrid;\n","import React from \"react\";\nimport { motion } from \"framer-motion\";\n\nfunction Modal({ selectedImg, setSelectedImg }) {\n  const handleClick = (e) => {\n    if (e.target.classList.contains(\"backdrop\")) {\n      setSelectedImg(null);\n    }\n  };\n  return (\n    <motion.div\n      className=\"backdrop\"\n      onClick={handleClick}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n    >\n      <motion.img\n        src={selectedImg}\n        alt={selectedImg}\n        initial={{ y: \"-100vh\" }}\n        animate={{ y: 0 }}\n      />\n    </motion.div>\n  );\n}\n\nexport default Modal;\n","import React, { useContext, useState } from \"react\";\nimport { UserContext } from \"../providers/UserProvider\";\nimport Nav from \"./gallery/Nav\";\nimport Upload from \"./gallery/Upload\";\nimport ImgGrid from \"./gallery/ImgGrid\";\nimport Modal from './gallery/Modal';\n\nfunction Home() {\n  const user = useContext(UserContext);\n  const [selectImg, setSelectImg] = useState(\"\")\n  return (\n    <div>\n      <Nav user={user} />\n      <Upload />\n      <ImgGrid user={user} setSelectedImg={setSelectImg}></ImgGrid>\n      { selectImg && (\n        <Modal selectedImg={selectImg} setSelectedImg={setSelectImg} />\n      )}\n    </div>\n  );\n}\n\nexport default Home;\n","import React, { useContext } from \"react\";\nimport { Router } from \"@reach/router\";\nimport SignIn from \"./authentification/SignIn\";\nimport SignUp from \"./authentification/SignUp\";\nimport { UserContext } from \"../providers/UserProvider\";\nimport Home from \"./Home\";\n\nfunction Application() {\n  const user = useContext(UserContext);\n  return (\n    <div>\n      {user ? (\n        <Home />\n      ) : (\n        <Router>\n          <SignUp path=\"signUp\" />\n          <SignIn path=\"/\" />\n        </Router>\n      )}\n    </div>\n  );\n}\n\nexport default Application;\n","import \"./App.css\";\nimport Application from \"./components/Application\";\nimport UserProvider from \"./providers/UserProvider\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <UserProvider>\n        <Application />\n      </UserProvider>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}